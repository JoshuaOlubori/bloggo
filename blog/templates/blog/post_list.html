
<!-- 
  START SESSION
<?php

include 'components/connect.php';

session_start();

if(isset($_SESSION['user_id'])){
   $user_id = $_SESSION['user_id'];
}else{
   $user_id = '';
};

include 'components/like_post.php';

?>

-->
{% extends 'base.html' %}
  <!--
<?php include 'components/user_header.php'; ?>
    -->

{% block title %} All Posts {% endblock %}   
{% block content %} 
    <section class="posts-container">
    <h1 class="heading">All Posts</h1>

    <div class="box-container">
     
    {% for post in all_posts %}
      <form class="box" method="post">
        
        <div class="post-admin">
          <i class="fas fa-user"></i>
          <div>
            <a href="#">
              {{ post.author }}
            </a>
            <div>
              {{ post.created }}
            </div>
          </div>
        </div>


         <img src="{{ post.cover.url }}" class="post-image" alt="">

        <div class="post-title">
          {{ post.title }}
        </div>
        <div class="post-content content-150">
          {{ post.content|truncatewords:30 }}
        </div>
        <a href="{{ post.get_absolute_url }}" class="inline-btn">read more</a>
        <a href="category.php?category=<?= $fetch_posts['category']; ?>" class="post-cat">
          <i class="fas fa-tag"></i>
          <span>
            {{ post.category }}
            
          </span></a>
        <div class="icons">
          <a href="view_post.php?post_id=<?= $post_id; ?>"><i class="fas fa-comment"></i><span>(
              <?= $total_post_comments; ?>)
            </span></a>
          <button type="submit" name="like_post">
            <i class="fas fa-heart"
              style="<?php if($confirm_likes->rowCount() > 0){ echo 'color:var(--red);'; } ?>  "></i><span>(
              <?= $total_post_likes; ?>)
            </span>
          </button>
        </div>
        
      </form>
      {% endfor %}
      <!--
<?php
         }
      }else{
         echo '<p class="empty">no posts added yet!</p>';
      }
      ?>
      -->
    </div>

    <!--
      USE THE STYLE OF THIS TO STYLE PAGINATION LINKS
 <div class="more-btn" style="text-align: center; margin-top: 1rem">
      <a href="#" class="inline-btn">view all posts</a>
    </div>
    -->
   
  </section>
  {% endblock %}


  <!--
 <?php include 'components/footer.php'; ?>
-->


 